function DataManager(){throw new Error("This is a static class")}function ConfigManager(){throw new Error("This is a static class")}function StorageManager(){throw new Error("This is a static class")}function ImageManager(){throw new Error("This is a static class")}function AudioManager(){throw new Error("This is a static class")}function SoundManager(){throw new Error("This is a static class")}function TextManager(){throw new Error("This is a static class")}function SceneManager(){throw new Error("This is a static class")}function BattleManager(){throw new Error("This is a static class")}function PluginManager(){throw new Error("This is a static class")}var $dataActors=null,$dataClasses=null,$dataSkills=null,$dataItems=null,$dataWeapons=null,$dataArmors=null,$dataEnemies=null,$dataTroops=null,$dataStates=null,$dataAnimations=null,$dataTilesets=null,$dataCommonEvents=null,$dataSystem=null,$dataMapInfos=null,$dataMap=null,$gameTemp=null,$gameSystem=null,$gameScreen=null,$gameTimer=null,$gameMessage=null,$gameSwitches=null,$gameVariables=null,$gameSelfSwitches=null,$gameActors=null,$gameParty=null,$gameTroop=null,$gameMap=null,$gamePlayer=null,$testEvent=null;DataManager._globalId="RPGMV",DataManager._lastAccessedId=1,DataManager._errorUrl=null,DataManager._databaseFiles=[{name:"$dataActors",src:"Actors.json"},{name:"$dataClasses",src:"Classes.json"},{name:"$dataSkills",src:"Skills.json"},{name:"$dataItems",src:"Items.json"},{name:"$dataWeapons",src:"Weapons.json"},{name:"$dataArmors",src:"Armors.json"},{name:"$dataEnemies",src:"Enemies.json"},{name:"$dataTroops",src:"Troops.json"},{name:"$dataStates",src:"States.json"},{name:"$dataAnimations",src:"Animations.json"},{name:"$dataTilesets",src:"Tilesets.json"},{name:"$dataCommonEvents",src:"CommonEvents.json"},{name:"$dataSystem",src:"System.json"},{name:"$dataMapInfos",src:"MapInfos.json"}],DataManager.loadDatabase=function(){for(var a=this.isBattleTest()||this.isEventTest(),b=a?"Test_":"",c=0;c<this._databaseFiles.length;c++){var d=this._databaseFiles[c].name,e=this._databaseFiles[c].src;this.loadDataFile(d,b+e)}this.isEventTest()&&this.loadDataFile("$testEvent",b+"Event.json")},DataManager.loadDataFile=function(a,b){var c=new XMLHttpRequest,d="data/"+b;c.open("GET",d),c.overrideMimeType("application/json"),c.onload=function(){c.status<400&&(window[a]=JSON.parse(c.responseText),DataManager.onLoad(window[a]))},c.onerror=function(){DataManager._errorUrl=DataManager._errorUrl||d},window[a]=null,c.send()},DataManager.isDatabaseLoaded=function(){this.checkError();for(var a=0;a<this._databaseFiles.length;a++)if(!window[this._databaseFiles[a].name])return!1;return!0},DataManager.loadMapData=function(a){if(a>0){var b="Map%1.json".format(a.padZero(3));this.loadDataFile("$dataMap",b)}else this.makeEmptyMap()},DataManager.makeEmptyMap=function(){$dataMap={},$dataMap.data=[],$dataMap.events=[],$dataMap.width=100,$dataMap.height=100,$dataMap.scrollType=3},DataManager.isMapLoaded=function(){return this.checkError(),!!$dataMap},DataManager.onLoad=function(a){var b;if(a===$dataMap?(this.extractMetadata(a),b=a.events):b=a,Array.isArray(b))for(var c=0;c<b.length;c++){var d=b[c];d&&void 0!==d.note&&this.extractMetadata(d)}},DataManager.extractMetadata=function(a){var b=/<([^<>:]+)(:?)([^>]*)>/g;for(a.meta={};;){var c=b.exec(a.note);if(!c)break;":"===c[2]?a.meta[c[1]]=c[3]:a.meta[c[1]]=!0}},DataManager.checkError=function(){if(DataManager._errorUrl)throw new Error("Failed to load: "+DataManager._errorUrl)},DataManager.isBattleTest=function(){return Utils.isOptionValid("btest")},DataManager.isEventTest=function(){return Utils.isOptionValid("etest")},DataManager.isSkill=function(a){return a&&$dataSkills.contains(a)},DataManager.isItem=function(a){return a&&$dataItems.contains(a)},DataManager.isWeapon=function(a){return a&&$dataWeapons.contains(a)},DataManager.isArmor=function(a){return a&&$dataArmors.contains(a)},DataManager.createGameObjects=function(){$gameTemp=new Game_Temp,$gameSystem=new Game_System,$gameScreen=new Game_Screen,$gameTimer=new Game_Timer,$gameMessage=new Game_Message,$gameSwitches=new Game_Switches,$gameVariables=new Game_Variables,$gameSelfSwitches=new Game_SelfSwitches,$gameActors=new Game_Actors,$gameParty=new Game_Party,$gameTroop=new Game_Troop,$gameMap=new Game_Map,$gamePlayer=new Game_Player},DataManager.setupNewGame=function(){this.createGameObjects(),this.selectSavefileForNewGame(),$gameParty.setupStartingMembers(),$gamePlayer.reserveTransfer($dataSystem.startMapId,$dataSystem.startX,$dataSystem.startY),Graphics.frameCount=0},DataManager.setupBattleTest=function(){this.createGameObjects(),$gameParty.setupBattleTest(),BattleManager.setup($dataSystem.testTroopId,!0,!1),BattleManager.setBattleTest(!0),BattleManager.playBattleBgm()},DataManager.setupEventTest=function(){this.createGameObjects(),this.selectSavefileForNewGame(),$gameParty.setupStartingMembers(),$gamePlayer.reserveTransfer(-1,8,6),$gamePlayer.setTransparent(!1)},DataManager.loadGlobalInfo=function(){var a;try{a=StorageManager.load(0)}catch(b){return console.error(b),[]}if(a){for(var c=JSON.parse(a),d=1;d<=this.maxSavefiles();d++)StorageManager.exists(d)||delete c[d];return c}return[]},DataManager.saveGlobalInfo=function(a){StorageManager.save(0,JSON.stringify(a))},DataManager.isThisGameFile=function(a){var b=this.loadGlobalInfo();if(b&&b[a]){if(StorageManager.isLocalMode())return!0;var c=b[a];return c.globalId===this._globalId&&c.title===$dataSystem.gameTitle}return!1},DataManager.isAnySavefileExists=function(){var a=this.loadGlobalInfo();if(a)for(var b=1;b<a.length;b++)if(this.isThisGameFile(b))return!0;return!1},DataManager.latestSavefileId=function(){var a=this.loadGlobalInfo(),b=1,c=0;if(a)for(var d=1;d<a.length;d++)this.isThisGameFile(d)&&a[d].timestamp>c&&(c=a[d].timestamp,b=d);return b},DataManager.loadAllSavefileImages=function(){var a=this.loadGlobalInfo();if(a)for(var b=1;b<a.length;b++)if(this.isThisGameFile(b)){var c=a[b];this.loadSavefileImages(c)}},DataManager.loadSavefileImages=function(a){if(a.characters)for(var b=0;b<a.characters.length;b++)ImageManager.loadCharacter(a.characters[b][0]);if(a.faces)for(var c=0;c<a.faces.length;c++)ImageManager.loadFace(a.faces[c][0])},DataManager.maxSavefiles=function(){return 20},DataManager.saveGame=function(a){try{return this.saveGameWithoutRescue(a)}catch(b){console.error(b);try{StorageManager.remove(a)}catch(c){}return!1}},DataManager.loadGame=function(a){try{return this.loadGameWithoutRescue(a)}catch(b){return console.error(b),!1}},DataManager.loadSavefileInfo=function(a){var b=this.loadGlobalInfo();return b&&b[a]?b[a]:null},DataManager.lastAccessedSavefileId=function(){return this._lastAccessedId},DataManager.saveGameWithoutRescue=function(a){var b=JsonEx.stringify(this.makeSaveContents());b.length>=2e5&&console.warn("Save data too big!"),StorageManager.save(a,b),this._lastAccessedId=a;var c=this.loadGlobalInfo()||[];return c[a]=this.makeSavefileInfo(),this.saveGlobalInfo(c),!0},DataManager.loadGameWithoutRescue=function(a){this.loadGlobalInfo();if(this.isThisGameFile(a)){var b=StorageManager.load(a);return this.createGameObjects(),this.extractSaveContents(JsonEx.parse(b)),this._lastAccessedId=a,!0}return!1},DataManager.selectSavefileForNewGame=function(){var a=this.loadGlobalInfo();if(this._lastAccessedId=1,a){var b=Math.max(0,a.length-1);if(b<this.maxSavefiles())this._lastAccessedId=b+1;else for(var c=Number.MAX_VALUE,d=1;d<a.length;d++){if(!a[d]){this._lastAccessedId=d;break}a[d].timestamp<c&&(c=a[d].timestamp,this._lastAccessedId=d)}}},DataManager.makeSavefileInfo=function(){var a={};return a.globalId=this._globalId,a.title=$dataSystem.gameTitle,a.characters=$gameParty.charactersForSavefile(),a.faces=$gameParty.facesForSavefile(),a.playtime=$gameSystem.playtimeText(),a.timestamp=Date.now(),a},DataManager.makeSaveContents=function(){var a={};return a.system=$gameSystem,a.screen=$gameScreen,a.timer=$gameTimer,a.switches=$gameSwitches,a.variables=$gameVariables,a.selfSwitches=$gameSelfSwitches,a.actors=$gameActors,a.party=$gameParty,a.map=$gameMap,a.player=$gamePlayer,a},DataManager.extractSaveContents=function(a){$gameSystem=a.system,$gameScreen=a.screen,$gameTimer=a.timer,$gameSwitches=a.switches,$gameVariables=a.variables,$gameSelfSwitches=a.selfSwitches,$gameActors=a.actors,$gameParty=a.party,$gameMap=a.map,$gamePlayer=a.player},ConfigManager.alwaysDash=!1,ConfigManager.commandRemember=!1,Object.defineProperty(ConfigManager,"bgmVolume",{get:function(){return AudioManager._bgmVolume},set:function(a){AudioManager.bgmVolume=a},configurable:!0}),Object.defineProperty(ConfigManager,"bgsVolume",{get:function(){return AudioManager.bgsVolume},set:function(a){AudioManager.bgsVolume=a},configurable:!0}),Object.defineProperty(ConfigManager,"meVolume",{get:function(){return AudioManager.meVolume},set:function(a){AudioManager.meVolume=a},configurable:!0}),Object.defineProperty(ConfigManager,"seVolume",{get:function(){return AudioManager.seVolume},set:function(a){AudioManager.seVolume=a},configurable:!0}),ConfigManager.load=function(){var a,b={};try{a=StorageManager.load(-1)}catch(c){console.error(c)}a&&(b=JSON.parse(a)),this.applyData(b)},ConfigManager.save=function(){StorageManager.save(-1,JSON.stringify(this.makeData()))},ConfigManager.makeData=function(){var a={};return a.alwaysDash=this.alwaysDash,a.commandRemember=this.commandRemember,a.bgmVolume=this.bgmVolume,a.bgsVolume=this.bgsVolume,a.meVolume=this.meVolume,a.seVolume=this.seVolume,a},ConfigManager.applyData=function(a){this.alwaysDash=this.readFlag(a,"alwaysDash"),this.commandRemember=this.readFlag(a,"commandRemember"),this.bgmVolume=this.readVolume(a,"bgmVolume"),this.bgsVolume=this.readVolume(a,"bgsVolume"),this.meVolume=this.readVolume(a,"meVolume"),this.seVolume=this.readVolume(a,"seVolume")},ConfigManager.readFlag=function(a,b){return!!a[b]},ConfigManager.readVolume=function(a,b){var c=a[b];return void 0!==c?Number(c).clamp(0,100):100},StorageManager.save=function(a,b){this.isLocalMode()?this.saveToLocalFile(a,b):this.saveToWebStorage(a,b)},StorageManager.load=function(a){return this.isLocalMode()?this.loadFromLocalFile(a):this.loadFromWebStorage(a)},StorageManager.exists=function(a){return this.isLocalMode()?this.localFileExists(a):this.webStorageExists(a)},StorageManager.remove=function(a){this.isLocalMode()?this.removeLocalFile(a):this.removeWebStorage(a)},StorageManager.isLocalMode=function(){return Utils.isNwjs()},StorageManager.saveToLocalFile=function(a,b){var c=LZString.compressToBase64(b),d=require("fs"),e=this.localFileDirectoryPath(),f=this.localFilePath(a);d.existsSync(e)||d.mkdirSync(e),d.writeFileSync(f,c)},StorageManager.loadFromLocalFile=function(a){var b=null,c=require("fs"),d=this.localFilePath(a);return c.existsSync(d)&&(b=c.readFileSync(d,{encoding:"utf8"})),LZString.decompressFromBase64(b)},StorageManager.localFileExists=function(a){var b=require("fs");return b.existsSync(this.localFilePath(a))},StorageManager.removeLocalFile=function(a){var b=require("fs"),c=this.localFilePath(a);b.existsSync(c)&&b.unlinkSync(c)},StorageManager.saveToWebStorage=function(a,b){var c=this.webStorageKey(a),d=LZString.compressToBase64(b);localStorage.setItem(c,d)},StorageManager.loadFromWebStorage=function(a){var b=this.webStorageKey(a),c=localStorage.getItem(b);return LZString.decompressFromBase64(c)},StorageManager.webStorageExists=function(a){var b=this.webStorageKey(a);return!!localStorage.getItem(b)},StorageManager.removeWebStorage=function(a){var b=this.webStorageKey(a);localStorage.removeItem(b)},StorageManager.localFileDirectoryPath=function(){var a=window.location.pathname.replace(/(\/www|)\/[^\/]*$/,"/save/");return a.match(/^\/([A-Z]\:)/)&&(a=a.slice(1)),decodeURIComponent(a)},StorageManager.localFilePath=function(a){var b;return b=0>a?"config.rpgsave":0===a?"global.rpgsave":"file%1.rpgsave".format(a),this.localFileDirectoryPath()+b},StorageManager.webStorageKey=function(a){return 0>a?"RPG Config":0===a?"RPG Global":"RPG File%1".format(a)},ImageManager._cache={},ImageManager.loadAnimation=function(a,b){return this.loadBitmap("img/animations/",a,b,!0)},ImageManager.loadBattleback1=function(a,b){return this.loadBitmap("img/battlebacks1/",a,b,!0)},ImageManager.loadBattleback2=function(a,b){return this.loadBitmap("img/battlebacks2/",a,b,!0)},ImageManager.loadEnemy=function(a,b){return this.loadBitmap("img/enemies/",a,b,!0)},ImageManager.loadCharacter=function(a,b){return this.loadBitmap("img/characters/",a,b,!1)},ImageManager.loadFace=function(a,b){return this.loadBitmap("img/faces/",a,b,!0)},ImageManager.loadParallax=function(a,b){return this.loadBitmap("img/parallaxes/",a,b,!0)},ImageManager.loadPicture=function(a,b){return this.loadBitmap("img/pictures/",a,b,!0)},ImageManager.loadSvActor=function(a,b){return this.loadBitmap("img/sv_actors/",a,b,!1)},ImageManager.loadSvEnemy=function(a,b){return this.loadBitmap("img/sv_enemies/",a,b,!0)},ImageManager.loadSystem=function(a,b){return this.loadBitmap("img/system/",a,b,!1)},ImageManager.loadTileset=function(a,b){return this.loadBitmap("img/tilesets/",a,b,!1)},ImageManager.loadTitle1=function(a,b){return this.loadBitmap("img/titles1/",a,b,!0)},ImageManager.loadTitle2=function(a,b){return this.loadBitmap("img/titles2/",a,b,!0)},ImageManager.loadBitmap=function(a,b,c,d){if(b){var e=a+encodeURIComponent(b)+".png",f=this.loadNormalBitmap(e,c||0);return f.smooth=d,f}return this.loadEmptyBitmap()},ImageManager.loadEmptyBitmap=function(){return this._cache[null]||(this._cache[null]=new Bitmap),this._cache[null]},ImageManager.loadNormalBitmap=function(a,b){var c=a+":"+b;if(!this._cache[c]){var d=Bitmap.load(a);d.addLoadListener(function(){d.rotateHue(b)}),this._cache[c]=d}return this._cache[c]},ImageManager.clear=function(){this._cache={}},ImageManager.isReady=function(){for(var a in this._cache){var b=this._cache[a];if(b.isError())throw new Error("Failed to load: "+b.url);if(!b.isReady())return!1}return!0},ImageManager.isObjectCharacter=function(a){var b=a.match(/^[\!\$]+/);return b&&b[0].contains("!")},ImageManager.isBigCharacter=function(a){var b=a.match(/^[\!\$]+/);return b&&b[0].contains("$")},ImageManager.isZeroParallax=function(a){return"!"===a.charAt(0)},AudioManager._bgmVolume=100,AudioManager._bgsVolume=100,AudioManager._meVolume=100,AudioManager._seVolume=100,AudioManager._currentBgm=null,AudioManager._currentBgs=null,AudioManager._bgmBuffer=null,AudioManager._bgsBuffer=null,AudioManager._meBuffer=null,AudioManager._seBuffers=[],AudioManager._staticBuffers=[],AudioManager._replayFadeTime=.5,AudioManager._path="audio/",Object.defineProperty(AudioManager,"bgmVolume",{get:function(){return this._bgmVolume},set:function(a){this._bgmVolume=a,this.updateBgmParameters(this._currentBgm)},configurable:!0}),Object.defineProperty(AudioManager,"bgsVolume",{get:function(){return this._bgsVolume},set:function(a){this._bgsVolume=a,this.updateBgsParameters(this._currentBgs)},configurable:!0}),Object.defineProperty(AudioManager,"meVolume",{get:function(){return this._meVolume},set:function(a){this._meVolume=a,this.updateMeParameters(this._currentMe)},configurable:!0}),Object.defineProperty(AudioManager,"seVolume",{get:function(){return this._seVolume},set:function(a){this._seVolume=a},configurable:!0}),AudioManager.playBgm=function(a,b){this.isCurrentBgm(a)?this.updateBgmParameters(a):(this.stopBgm(),a.name&&(this._bgmBuffer=this.createBuffer("bgm",a.name),this.updateBgmParameters(a),this._meBuffer||this._bgmBuffer.play(!0,b||0))),this.updateCurrentBgm(a,b)},AudioManager.replayBgm=function(a){this.isCurrentBgm(a)?this.updateBgmParameters(a):(this.playBgm(a,a.pos),this._bgmBuffer&&this._bgmBuffer.fadeIn(this._replayFadeTime))},AudioManager.isCurrentBgm=function(a){return this._currentBgm&&this._bgmBuffer&&this._currentBgm.name===a.name},AudioManager.updateBgmParameters=function(a){this.updateBufferParameters(this._bgmBuffer,this._bgmVolume,a)},AudioManager.updateCurrentBgm=function(a,b){this._currentBgm={name:a.name,volume:a.volume,pitch:a.pitch,pan:a.pan,pos:b}},AudioManager.stopBgm=function(){this._bgmBuffer&&(this._bgmBuffer.stop(),this._bgmBuffer=null,this._currentBgm=null)},AudioManager.fadeOutBgm=function(a){this._bgmBuffer&&this._currentBgm&&(this._bgmBuffer.fadeOut(a),this._currentBgm=null)},AudioManager.fadeInBgm=function(a){this._bgmBuffer&&this._currentBgm&&this._bgmBuffer.fadeIn(a)},AudioManager.playBgs=function(a,b){this.isCurrentBgs(a)?this.updateBgsParameters(a):(this.stopBgs(),a.name&&(this._bgsBuffer=this.createBuffer("bgs",a.name),this.updateBgsParameters(a),this._bgsBuffer.play(!0,b||0))),this.updateCurrentBgs(a,b)},AudioManager.replayBgs=function(a){this.isCurrentBgs(a)?this.updateBgsParameters(a):(this.playBgs(a,a.pos),this._bgsBuffer&&this._bgsBuffer.fadeIn(this._replayFadeTime))},AudioManager.isCurrentBgs=function(a){return this._currentBgs&&this._bgsBuffer&&this._currentBgs.name===a.name},AudioManager.updateBgsParameters=function(a){this.updateBufferParameters(this._bgsBuffer,this._bgsVolume,a)},AudioManager.updateCurrentBgs=function(a,b){this._currentBgs={name:a.name,volume:a.volume,pitch:a.pitch,pan:a.pan,pos:b}},AudioManager.stopBgs=function(){this._bgsBuffer&&(this._bgsBuffer.stop(),this._bgsBuffer=null,this._currentBgs=null)},AudioManager.fadeOutBgs=function(a){this._bgsBuffer&&this._currentBgs&&(this._bgsBuffer.fadeOut(a),this._currentBgs=null)},AudioManager.fadeInBgs=function(a){this._bgsBuffer&&this._currentBgs&&this._bgsBuffer.fadeIn(a)},AudioManager.playMe=function(a){this.stopMe(),a.name&&(this._bgmBuffer&&this._currentBgm&&(this._currentBgm.pos=this._bgmBuffer.seek(),this._bgmBuffer.stop()),this._meBuffer=this.createBuffer("me",a.name),this.updateMeParameters(a),this._meBuffer.play(!1),this._meBuffer.addStopListener(this.stopMe.bind(this)))},AudioManager.updateMeParameters=function(a){this.updateBufferParameters(this._meBuffer,this._meVolume,a)},AudioManager.fadeOutMe=function(a){this._meBuffer&&this._meBuffer.fadeOut(a)},AudioManager.stopMe=function(){this._meBuffer&&(this._meBuffer.stop(),this._meBuffer=null,this._bgmBuffer&&this._currentBgm&&!this._bgmBuffer.isPlaying()&&(this._bgmBuffer.play(!0,this._currentBgm.pos),this._bgmBuffer.fadeIn(this._replayFadeTime)))},AudioManager.playSe=function(a){if(a.name){this._seBuffers=this._seBuffers.filter(function(a){return a.isPlaying()});var b=this.createBuffer("se",a.name);this.updateSeParameters(b,a),b.play(!1),this._seBuffers.push(b)}},AudioManager.updateSeParameters=function(a,b){this.updateBufferParameters(a,this._seVolume,b)},AudioManager.stopSe=function(){this._seBuffers.forEach(function(a){a.stop()}),this._seBuffers=[]},AudioManager.playStaticSe=function(a){if(a.name){this.loadStaticSe(a);for(var b=0;b<this._staticBuffers.length;b++){var c=this._staticBuffers[b];if(c._reservedSeName===a.name){c.stop(),this.updateSeParameters(c,a),c.play(!1);break}}}},AudioManager.loadStaticSe=function(a){if(a.name&&!this.isStaticSe(a)){var b=this.createBuffer("se",a.name);b._reservedSeName=a.name,this._staticBuffers.push(b),this.shouldUseHtml5Audio()&&Html5Audio.setStaticSe(b._url)}},AudioManager.isStaticSe=function(a){for(var b=0;b<this._staticBuffers.length;b++){var c=this._staticBuffers[b];if(c._reservedSeName===a.name)return!0}return!1},AudioManager.stopAll=function(){this.stopMe(),this.stopBgm(),this.stopBgs(),this.stopSe()},AudioManager.saveBgm=function(){if(this._currentBgm){var a=this._currentBgm;return{name:a.name,volume:a.volume,pitch:a.pitch,pan:a.pan,pos:this._bgmBuffer?this._bgmBuffer.seek():0}}return this.makeEmptyAudioObject()},AudioManager.saveBgs=function(){if(this._currentBgs){var a=this._currentBgs;return{name:a.name,volume:a.volume,pitch:a.pitch,pan:a.pan,pos:this._bgsBuffer?this._bgsBuffer.seek():0}}return this.makeEmptyAudioObject()},AudioManager.makeEmptyAudioObject=function(){return{name:"",volume:0,pitch:0}},AudioManager.createBuffer=function(a,b){var c=this.audioFileExt(),d=this._path+a+"/"+encodeURIComponent(b)+c;return this.shouldUseHtml5Audio()&&"bgm"===a?(Html5Audio.setup(d),Html5Audio):new WebAudio(d)},AudioManager.updateBufferParameters=function(a,b,c){a&&c&&(a.volume=b*(c.volume||0)/1e4,a.pitch=(c.pitch||0)/100,a.pan=(c.pan||0)/100)},AudioManager.audioFileExt=function(){return WebAudio.canPlayOgg()&&!Utils.isMobileDevice()?".ogg":".m4a"},AudioManager.shouldUseHtml5Audio=function(){return Utils.isAndroidChrome()},AudioManager.checkErrors=function(){this.checkWebAudioError(this._bgmBuffer),this.checkWebAudioError(this._bgsBuffer),this.checkWebAudioError(this._meBuffer),this._seBuffers.forEach(function(a){this.checkWebAudioError(a)}.bind(this)),this._staticBuffers.forEach(function(a){this.checkWebAudioError(a)}.bind(this))},AudioManager.checkWebAudioError=function(a){if(a&&a.isError())throw new Error("Failed to load: "+a.url)},SoundManager.preloadImportantSounds=function(){this.loadSystemSound(0),this.loadSystemSound(1),this.loadSystemSound(2),this.loadSystemSound(3)},SoundManager.loadSystemSound=function(a){$dataSystem&&AudioManager.loadStaticSe($dataSystem.sounds[a])},SoundManager.playSystemSound=function(a){$dataSystem&&AudioManager.playStaticSe($dataSystem.sounds[a])},SoundManager.playCursor=function(){this.playSystemSound(0)},SoundManager.playOk=function(){this.playSystemSound(1)},SoundManager.playCancel=function(){this.playSystemSound(2)},SoundManager.playBuzzer=function(){this.playSystemSound(3)},SoundManager.playEquip=function(){this.playSystemSound(4)},SoundManager.playSave=function(){this.playSystemSound(5)},SoundManager.playLoad=function(){this.playSystemSound(6)},SoundManager.playBattleStart=function(){this.playSystemSound(7)},SoundManager.playEscape=function(){this.playSystemSound(8)},SoundManager.playEnemyAttack=function(){this.playSystemSound(9)},SoundManager.playEnemyDamage=function(){this.playSystemSound(10)},SoundManager.playEnemyCollapse=function(){this.playSystemSound(11)},SoundManager.playBossCollapse1=function(){this.playSystemSound(12)},SoundManager.playBossCollapse2=function(){this.playSystemSound(13)},SoundManager.playActorDamage=function(){this.playSystemSound(14)},SoundManager.playActorCollapse=function(){this.playSystemSound(15)},SoundManager.playRecovery=function(){this.playSystemSound(16)},SoundManager.playMiss=function(){this.playSystemSound(17)},SoundManager.playEvasion=function(){this.playSystemSound(18)},SoundManager.playMagicEvasion=function(){this.playSystemSound(19)},SoundManager.playReflection=function(){this.playSystemSound(20)},SoundManager.playShop=function(){this.playSystemSound(21)},SoundManager.playUseItem=function(){this.playSystemSound(22)},SoundManager.playUseSkill=function(){this.playSystemSound(23)},TextManager.basic=function(a){return $dataSystem.terms.basic[a]||""},TextManager.param=function(a){return $dataSystem.terms.params[a]||""},TextManager.command=function(a){return $dataSystem.terms.commands[a]||""},TextManager.message=function(a){return $dataSystem.terms.messages[a]||""},TextManager.getter=function(a,b){return{get:function(){return this[a](b)},configurable:!0}},Object.defineProperty(TextManager,"currencyUnit",{get:function(){return $dataSystem.currencyUnit},configurable:!0}),Object.defineProperties(TextManager,{level:TextManager.getter("basic",0),levelA:TextManager.getter("basic",1),hp:TextManager.getter("basic",2),hpA:TextManager.getter("basic",3),mp:TextManager.getter("basic",4),mpA:TextManager.getter("basic",5),tp:TextManager.getter("basic",6),tpA:TextManager.getter("basic",7),exp:TextManager.getter("basic",8),expA:TextManager.getter("basic",9),fight:TextManager.getter("command",0),escape:TextManager.getter("command",1),attack:TextManager.getter("command",2),guard:TextManager.getter("command",3),item:TextManager.getter("command",4),skill:TextManager.getter("command",5),equip:TextManager.getter("command",6),status:TextManager.getter("command",7),formation:TextManager.getter("command",8),save:TextManager.getter("command",9),gameEnd:TextManager.getter("command",10),options:TextManager.getter("command",11),weapon:TextManager.getter("command",12),armor:TextManager.getter("command",13),keyItem:TextManager.getter("command",14),equip2:TextManager.getter("command",15),optimize:TextManager.getter("command",16),clear:TextManager.getter("command",17),newGame:TextManager.getter("command",18),continue_:TextManager.getter("command",19),toTitle:TextManager.getter("command",21),cancel:TextManager.getter("command",22),buy:TextManager.getter("command",24),sell:TextManager.getter("command",25),alwaysDash:TextManager.getter("message","alwaysDash"),commandRemember:TextManager.getter("message","commandRemember"),bgmVolume:TextManager.getter("message","bgmVolume"),bgsVolume:TextManager.getter("message","bgsVolume"),meVolume:TextManager.getter("message","meVolume"),seVolume:TextManager.getter("message","seVolume"),possession:TextManager.getter("message","possession"),expTotal:TextManager.getter("message","expTotal"),expNext:TextManager.getter("message","expNext"),saveMessage:TextManager.getter("message","saveMessage"),loadMessage:TextManager.getter("message","loadMessage"),file:TextManager.getter("message","file"),partyName:TextManager.getter("message","partyName"),emerge:TextManager.getter("message","emerge"),preemptive:TextManager.getter("message","preemptive"),surprise:TextManager.getter("message","surprise"),escapeStart:TextManager.getter("message","escapeStart"),escapeFailure:TextManager.getter("message","escapeFailure"),victory:TextManager.getter("message","victory"),defeat:TextManager.getter("message","defeat"),obtainExp:TextManager.getter("message","obtainExp"),obtainGold:TextManager.getter("message","obtainGold"),obtainItem:TextManager.getter("message","obtainItem"),levelUp:TextManager.getter("message","levelUp"),obtainSkill:TextManager.getter("message","obtainSkill"),useItem:TextManager.getter("message","useItem"),criticalToEnemy:TextManager.getter("message","criticalToEnemy"),criticalToActor:TextManager.getter("message","criticalToActor"),actorDamage:TextManager.getter("message","actorDamage"),actorRecovery:TextManager.getter("message","actorRecovery"),actorGain:TextManager.getter("message","actorGain"),actorLoss:TextManager.getter("message","actorLoss"),actorDrain:TextManager.getter("message","actorDrain"),actorNoDamage:TextManager.getter("message","actorNoDamage"),actorNoHit:TextManager.getter("message","actorNoHit"),enemyDamage:TextManager.getter("message","enemyDamage"),enemyRecovery:TextManager.getter("message","enemyRecovery"),enemyGain:TextManager.getter("message","enemyGain"),enemyLoss:TextManager.getter("message","enemyLoss"),enemyDrain:TextManager.getter("message","enemyDrain"),enemyNoDamage:TextManager.getter("message","enemyNoDamage"),enemyNoHit:TextManager.getter("message","enemyNoHit"),evasion:TextManager.getter("message","evasion"),magicEvasion:TextManager.getter("message","magicEvasion"),magicReflection:TextManager.getter("message","magicReflection"),counterAttack:TextManager.getter("message","counterAttack"),substitute:TextManager.getter("message","substitute"),buffAdd:TextManager.getter("message","buffAdd"),debuffAdd:TextManager.getter("message","debuffAdd"),buffRemove:TextManager.getter("message","buffRemove"),actionFailure:TextManager.getter("message","actionFailure")}),SceneManager._scene=null,SceneManager._nextScene=null,SceneManager._stack=[],SceneManager._stopped=!1,SceneManager._sceneStarted=!1,SceneManager._exiting=!1,SceneManager._previousClass=null,SceneManager._backgroundBitmap=null,SceneManager._screenWidth=816,SceneManager._screenHeight=624,SceneManager._boxWidth=816,SceneManager._boxHeight=624,SceneManager.run=function(a){try{this.initialize(),this["goto"](a),this.requestUpdate()}catch(b){this.catchException(b)}},SceneManager.initialize=function(){this.initGraphics(),this.checkFileAccess(),this.initAudio(),this.initInput(),this.initNwjs(),this.checkPluginErrors(),this.setupErrorHandlers()},SceneManager.initGraphics=function(){var a=this.preferableRendererType();Graphics.initialize(this._screenWidth,this._screenHeight,a),Graphics.boxWidth=this._boxWidth,Graphics.boxHeight=this._boxHeight,Graphics.setLoadingImage("img/system/Loading.png"),Utils.isOptionValid("showfps")&&Graphics.showFps(),"webgl"===a&&this.checkWebGL()},SceneManager.preferableRendererType=function(){return Utils.isOptionValid("canvas")?"canvas":Utils.isOptionValid("webgl")?"webgl":this.shouldUseCanvasRenderer()?"canvas":"auto"},SceneManager.shouldUseCanvasRenderer=function(){return Utils.isMobileDevice()},SceneManager.checkWebGL=function(){if(!Graphics.hasWebGL())throw new Error("Your browser does not support WebGL.")},SceneManager.checkFileAccess=function(){if(!Utils.canReadGameFiles())throw new Error("Your browser does not allow to read local files.")},SceneManager.initAudio=function(){var a=Utils.isOptionValid("noaudio");if(!WebAudio.initialize(a)&&!a)throw new Error("Your browser does not support Web Audio API.")},SceneManager.initInput=function(){Input.initialize(),TouchInput.initialize()},SceneManager.initNwjs=function(){if(Utils.isNwjs()){var a=require("nw.gui"),b=a.Window.get();if("darwin"===process.platform&&!b.menu){var c=new a.Menu({type:"menubar"}),d={hideEdit:!0,hideWindow:!0};c.createMacBuiltin("Game",d),b.menu=c}}},SceneManager.checkPluginErrors=function(){PluginManager.checkErrors()},SceneManager.setupErrorHandlers=function(){window.addEventListener("error",this.onError.bind(this)),document.addEventListener("keydown",this.onKeyDown.bind(this))},SceneManager.requestUpdate=function(){this._stopped||requestAnimationFrame(this.update.bind(this))},SceneManager.update=function(){try{this.tickStart(),this.updateInputData(),this.updateMain(),this.tickEnd()}catch(a){this.catchException(a)}},SceneManager.terminate=function(){window.close()},SceneManager.onError=function(a){console.error(a.message),console.error(a.filename,a.lineno);try{this.stop(),Graphics.printError("Error",a.message),AudioManager.stopAll()}catch(b){}},SceneManager.onKeyDown=function(a){if(!a.ctrlKey&&!a.altKey)switch(a.keyCode){case 116:Utils.isNwjs()&&location.reload();break;case 119:Utils.isNwjs()&&Utils.isOptionValid("test")&&require("nw.gui").Window.get().showDevTools()}},SceneManager.catchException=function(a){a instanceof Error?(Graphics.printError(a.name,a.message),console.error(a.stack)):Graphics.printError("UnknownError",a),AudioManager.stopAll(),this.stop()},SceneManager.tickStart=function(){Graphics.tickStart()},SceneManager.tickEnd=function(){Graphics.tickEnd()},SceneManager.updateInputData=function(){Input.update(),TouchInput.update()},SceneManager.updateMain=function(){this.changeScene(),this.updateScene(),this.renderScene(),this.requestUpdate()},SceneManager.changeScene=function(){this.isSceneChanging()&&!this.isCurrentSceneBusy()&&(this._scene&&(this._scene.terminate(),this._previousClass=this._scene.constructor),this._scene=this._nextScene,this._scene&&(this._scene.create(),this._nextScene=null,this._sceneStarted=!1,this.onSceneCreate()),this._exiting&&this.terminate())},SceneManager.updateScene=function(){this._scene&&(!this._sceneStarted&&this._scene.isReady()&&(this._scene.start(),this._sceneStarted=!0,this.onSceneStart()),this.isCurrentSceneStarted()&&this._scene.update())},SceneManager.renderScene=function(){this.isCurrentSceneStarted()?Graphics.render(this._scene):this._scene&&this.onSceneLoading()},SceneManager.onSceneCreate=function(){Graphics.startLoading()},SceneManager.onSceneStart=function(){Graphics.endLoading()},SceneManager.onSceneLoading=function(){Graphics.updateLoading()},SceneManager.isSceneChanging=function(){return this._exiting||!!this._nextScene},SceneManager.isCurrentSceneBusy=function(){return this._scene&&this._scene.isBusy()},SceneManager.isCurrentSceneStarted=function(){return this._scene&&this._sceneStarted},SceneManager.isNextScene=function(a){return this._nextScene&&this._nextScene.constructor===a},SceneManager.isPreviousScene=function(a){return this._previousClass===a},SceneManager["goto"]=function(a){a&&(this._nextScene=new a),this._scene&&this._scene.stop();
},SceneManager.push=function(a){this._stack.push(this._scene.constructor),this["goto"](a)},SceneManager.pop=function(){this._stack.length>0?this["goto"](this._stack.pop()):this.exit()},SceneManager.exit=function(){this["goto"](null),this._exiting=!0},SceneManager.clearStack=function(){this._stack=[]},SceneManager.stop=function(){this._stopped=!0},SceneManager.prepareNextScene=function(){this._nextScene.prepare.apply(this._nextScene,arguments)},SceneManager.snap=function(){return Bitmap.snap(this._scene)},SceneManager.snapForBackground=function(){this._backgroundBitmap=this.snap(),this._backgroundBitmap.blur()},SceneManager.backgroundBitmap=function(){return this._backgroundBitmap},BattleManager.setup=function(a,b,c){this.initMembers(),this._canEscape=b,this._canLose=c,$gameTroop.setup(a),$gameScreen.onBattleStart(),this.makeEscapeRatio()},BattleManager.initMembers=function(){this._phase="init",this._canEscape=!1,this._canLose=!1,this._battleTest=!1,this._eventCallback=null,this._preemptive=!1,this._surprise=!1,this._actorIndex=-1,this._actionForcedBattler=null,this._mapBgm=null,this._mapBgs=null,this._actionBattlers=[],this._subject=null,this._action=null,this._targets=[],this._logWindow=null,this._statusWindow=null,this._spriteset=null,this._escapeRatio=0,this._escaped=!1,this._rewards={}},BattleManager.isBattleTest=function(){return this._battleTest},BattleManager.setBattleTest=function(a){this._battleTest=a},BattleManager.setEventCallback=function(a){this._eventCallback=a},BattleManager.setLogWindow=function(a){this._logWindow=a},BattleManager.setStatusWindow=function(a){this._statusWindow=a},BattleManager.setSpriteset=function(a){this._spriteset=a},BattleManager.onEncounter=function(){this._preemptive=Math.random()<this.ratePreemptive(),this._surprise=Math.random()<this.rateSurprise()&&!this._preemptive},BattleManager.ratePreemptive=function(){return $gameParty.ratePreemptive($gameTroop.agility())},BattleManager.rateSurprise=function(){return $gameParty.rateSurprise($gameTroop.agility())},BattleManager.saveBgmAndBgs=function(){this._mapBgm=AudioManager.saveBgm(),this._mapBgs=AudioManager.saveBgs()},BattleManager.playBattleBgm=function(){AudioManager.playBgm($gameSystem.battleBgm()),AudioManager.stopBgs()},BattleManager.playVictoryMe=function(){AudioManager.playMe($gameSystem.victoryMe())},BattleManager.playDefeatMe=function(){AudioManager.playMe($gameSystem.defeatMe())},BattleManager.replayBgmAndBgs=function(){this._mapBgm?AudioManager.replayBgm(this._mapBgm):AudioManager.stopBgm(),this._mapBgs&&AudioManager.replayBgs(this._mapBgs)},BattleManager.makeEscapeRatio=function(){this._escapeRatio=.5*$gameParty.agility()/$gameTroop.agility()},BattleManager.update=function(){if(!this.isBusy()&&!this.updateEvent())switch(this._phase){case"start":this.startInput();break;case"turn":this.updateTurn();break;case"action":this.updateAction();break;case"turnEnd":this.updateTurnEnd();break;case"battleEnd":this.updateBattleEnd()}},BattleManager.updateEvent=function(){switch(this._phase){case"start":case"turn":case"turnEnd":return this.isActionForced()?(this.processForcedAction(),!0):this.updateEventMain()}return this.checkAbort()},BattleManager.updateEventMain=function(){return $gameTroop.updateInterpreter(),$gameParty.requestMotionRefresh(),$gameTroop.isEventRunning()||this.checkBattleEnd()?!0:($gameTroop.setupBattleEvent(),$gameTroop.isEventRunning()||SceneManager.isSceneChanging()?!0:!1)},BattleManager.isBusy=function(){return $gameMessage.isBusy()||this._spriteset.isBusy()||this._logWindow.isBusy()},BattleManager.isInputting=function(){return"input"===this._phase},BattleManager.isInTurn=function(){return"turn"===this._phase},BattleManager.isTurnEnd=function(){return"turnEnd"===this._phase},BattleManager.isAborting=function(){return"aborting"===this._phase},BattleManager.isBattleEnd=function(){return"battleEnd"===this._phase},BattleManager.canEscape=function(){return this._canEscape},BattleManager.canLose=function(){return this._canLose},BattleManager.isEscaped=function(){return this._escaped},BattleManager.actor=function(){return this._actorIndex>=0?$gameParty.members()[this._actorIndex]:null},BattleManager.clearActor=function(){this.changeActor(-1,"")},BattleManager.changeActor=function(a,b){var c=this.actor();this._actorIndex=a;var d=this.actor();c&&c.setActionState(b),d&&d.setActionState("inputting")},BattleManager.startBattle=function(){this._phase="start",$gameSystem.onBattleStart(),$gameParty.onBattleStart(),$gameTroop.onBattleStart(),this.displayStartMessages()},BattleManager.displayStartMessages=function(){$gameTroop.enemyNames().forEach(function(a){$gameMessage.add(TextManager.emerge.format(a))}),this._preemptive?$gameMessage.add(TextManager.preemptive.format($gameParty.name())):this._surprise&&$gameMessage.add(TextManager.surprise.format($gameParty.name()))},BattleManager.startInput=function(){this._phase="input",$gameParty.makeActions(),$gameTroop.makeActions(),this.clearActor(),(this._surprise||!$gameParty.canInput())&&this.startTurn()},BattleManager.inputtingAction=function(){return this.actor()?this.actor().inputtingAction():null},BattleManager.selectNextCommand=function(){do if((!this.actor()||!this.actor().selectNextCommand())&&(this.changeActor(this._actorIndex+1,"waiting"),this._actorIndex>=$gameParty.size())){this.startTurn();break}while(!this.actor().canInput())},BattleManager.selectPreviousCommand=function(){do if((!this.actor()||!this.actor().selectPreviousCommand())&&(this.changeActor(this._actorIndex-1,"undecided"),this._actorIndex<0))return;while(!this.actor().canInput())},BattleManager.refreshStatus=function(){this._statusWindow.refresh()},BattleManager.startTurn=function(){this._phase="turn",this.clearActor(),$gameTroop.increaseTurn(),this.makeActionOrders(),$gameParty.requestMotionRefresh(),this._logWindow.startTurn()},BattleManager.updateTurn=function(){$gameParty.requestMotionRefresh(),this._subject||(this._subject=this.getNextSubject()),this._subject?this.processTurn():this.endTurn()},BattleManager.processTurn=function(){var a=this._subject,b=a.currentAction();b?(b.prepare(),b.isValid()&&this.startAction(),a.removeCurrentAction()):(a.onAllActionsEnd(),this.refreshStatus(),this._logWindow.displayAutoAffectedStatus(a),this._logWindow.displayCurrentState(a),this._logWindow.displayRegeneration(a),this._subject=this.getNextSubject())},BattleManager.endTurn=function(){this._phase="turnEnd",this._preemptive=!1,this._surprise=!1,this.allBattleMembers().forEach(function(a){a.onTurnEnd(),this.refreshStatus(),this._logWindow.displayAutoAffectedStatus(a),this._logWindow.displayRegeneration(a)},this)},BattleManager.updateTurnEnd=function(){this.startInput()},BattleManager.getNextSubject=function(){for(;;){var a=this._actionBattlers.shift();if(!a)return null;if(a.isBattleMember()&&a.isAlive())return a}},BattleManager.allBattleMembers=function(){return $gameParty.members().concat($gameTroop.members())},BattleManager.makeActionOrders=function(){var a=[];this._surprise||(a=a.concat($gameParty.members())),this._preemptive||(a=a.concat($gameTroop.members())),a.forEach(function(a){a.makeSpeed()}),a.sort(function(a,b){return b.speed()-a.speed()}),this._actionBattlers=a},BattleManager.startAction=function(){var a=this._subject,b=a.currentAction(),c=b.makeTargets();this._phase="action",this._action=b,this._targets=c,a.useItem(b.item()),this._action.applyGlobal(),this.refreshStatus(),this._logWindow.startAction(a,b,c)},BattleManager.updateAction=function(){var a=this._targets.shift();a?this.invokeAction(this._subject,a):this.endAction()},BattleManager.endAction=function(){this._logWindow.endAction(this._subject),this._phase="turn"},BattleManager.invokeAction=function(a,b){this._logWindow.push("pushBaseLine"),Math.random()<this._action.itemCnt(b)?this.invokeCounterAttack(a,b):Math.random()<this._action.itemMrf(b)?this.invokeMagicReflection(a,b):this.invokeNormalAction(a,b),a.setLastTarget(b),this._logWindow.push("popBaseLine"),this.refreshStatus()},BattleManager.invokeNormalAction=function(a,b){var c=this.applySubstitute(b);this._action.apply(c),this._logWindow.displayActionResults(a,c)},BattleManager.invokeCounterAttack=function(a,b){var c=new Game_Action(b);c.setAttack(),c.apply(a),this._logWindow.displayCounter(b),this._logWindow.displayActionResults(a,a)},BattleManager.invokeMagicReflection=function(a,b){this._logWindow.displayReflection(b),this._action.apply(a),this._logWindow.displayActionResults(a,a)},BattleManager.applySubstitute=function(a){if(this.checkSubstitute(a)){var b=a.friendsUnit().substituteBattler();if(b&&a!==b)return this._logWindow.displaySubstitute(b,a),b}return a},BattleManager.checkSubstitute=function(a){return a.isDying()&&!this._action.isCertainHit()},BattleManager.isActionForced=function(){return!!this._actionForcedBattler},BattleManager.forceAction=function(a){this._actionForcedBattler=a;var b=this._actionBattlers.indexOf(a);b>=0&&this._actionBattlers.splice(b,1)},BattleManager.processForcedAction=function(){this._actionForcedBattler&&(this._subject=this._actionForcedBattler,this._actionForcedBattler=null,this.startAction(),this._subject.removeCurrentAction())},BattleManager.abort=function(){this._phase="aborting"},BattleManager.checkBattleEnd=function(){if(this._phase){if(this.checkAbort())return!0;if($gameParty.isAllDead())return this.processDefeat(),!0;if($gameTroop.isAllDead())return this.processVictory(),!0}return!1},BattleManager.checkAbort=function(){return $gameParty.isEmpty()||this.isAborting()?(this.processAbort(),!0):!1},BattleManager.processVictory=function(){$gameParty.removeBattleStates(),$gameParty.performVictory(),this.playVictoryMe(),this.replayBgmAndBgs(),this.makeRewards(),this.displayVictoryMessage(),this.displayRewards(),this.gainRewards(),this.endBattle(0)},BattleManager.processEscape=function(){$gameParty.removeBattleStates(),$gameParty.performEscape(),SoundManager.playEscape();var a=this._preemptive?!0:Math.random()<this._escapeRatio;return a?(this.displayEscapeSuccessMessage(),this._escaped=!0,this.processAbort()):(this.displayEscapeFailureMessage(),this._escapeRatio+=.1,$gameParty.clearActions(),this.startTurn()),a},BattleManager.processAbort=function(){this.replayBgmAndBgs(),this.endBattle(1)},BattleManager.processDefeat=function(){this.displayDefeatMessage(),this.playDefeatMe(),this._canLose?this.replayBgmAndBgs():AudioManager.stopBgm(),this.endBattle(2)},BattleManager.endBattle=function(a){this._phase="battleEnd",this._eventCallback&&this._eventCallback(a),0===a?$gameSystem.onBattleWin():this._escaped&&$gameSystem.onBattleEscape()},BattleManager.updateBattleEnd=function(){this.isBattleTest()?(AudioManager.stopBgm(),SceneManager.exit()):$gameParty.isAllDead()?this._canLose?($gameParty.reviveBattleMembers(),SceneManager.pop()):SceneManager["goto"](Scene_Gameover):SceneManager.pop(),this._phase=null},BattleManager.makeRewards=function(){this._rewards={},this._rewards.gold=$gameTroop.goldTotal(),this._rewards.exp=$gameTroop.expTotal(),this._rewards.items=$gameTroop.makeDropItems()},BattleManager.displayVictoryMessage=function(){$gameMessage.add(TextManager.victory.format($gameParty.name()))},BattleManager.displayDefeatMessage=function(){$gameMessage.add(TextManager.defeat.format($gameParty.name()))},BattleManager.displayEscapeSuccessMessage=function(){$gameMessage.add(TextManager.escapeStart.format($gameParty.name()))},BattleManager.displayEscapeFailureMessage=function(){$gameMessage.add(TextManager.escapeStart.format($gameParty.name())),$gameMessage.add("\\."+TextManager.escapeFailure)},BattleManager.displayRewards=function(){this.displayExp(),this.displayGold(),this.displayDropItems()},BattleManager.displayExp=function(){var a=this._rewards.exp;if(a>0){var b=TextManager.obtainExp.format(a,TextManager.exp);$gameMessage.add("\\."+b)}},BattleManager.displayGold=function(){var a=this._rewards.gold;a>0&&$gameMessage.add("\\."+TextManager.obtainGold.format(a))},BattleManager.displayDropItems=function(){var a=this._rewards.items;a.length>0&&($gameMessage.newPage(),a.forEach(function(a){$gameMessage.add(TextManager.obtainItem.format(a.name))}))},BattleManager.gainRewards=function(){this.gainExp(),this.gainGold(),this.gainDropItems()},BattleManager.gainExp=function(){var a=this._rewards.exp;$gameParty.allMembers().forEach(function(b){b.gainExp(a)})},BattleManager.gainGold=function(){$gameParty.gainGold(this._rewards.gold)},BattleManager.gainDropItems=function(){var a=this._rewards.items;a.forEach(function(a){$gameParty.gainItem(a,1)})},PluginManager._path="js/plugins/",PluginManager._scripts=[],PluginManager._errorUrls=[],PluginManager._parameters={},PluginManager.setup=function(a){a.forEach(function(a){a.status&&!this._scripts.contains(a.name)&&(this.setParameters(a.name,a.parameters),this.loadScript(a.name+".js"),this._scripts.push(a.name))},this)},PluginManager.checkErrors=function(){var a=this._errorUrls.shift();if(a)throw new Error("Failed to load: "+a)},PluginManager.parameters=function(a){return this._parameters[a.toLowerCase()]||{}},PluginManager.setParameters=function(a,b){this._parameters[a.toLowerCase()]=b},PluginManager.loadScript=function(a){var b=this._path+a,c=document.createElement("script");c.type="text/javascript",c.src=b,c.async=!1,c.onerror=this.onError.bind(this),c._url=b,document.body.appendChild(c)},PluginManager.onError=function(a){this._errorUrls.push(a.target._url)};